{% extends "dashboard/admin/base.html" %}
{% block title %}Admin - Students{% endblock %}
{% block main %}
        <section class="page-header">
          <div>
            <h1>Student Accounts</h1>
            <p>Manage enrolled students and access their account details.</p>
          </div>
          <div class="quick-actions">
            <a class="primary-btn" href="#">Create Student</a>
            <a class="ghost-btn" href="#">Export List</a>
          </div>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h2>Students</h2>
          </div>
          <div class="table-wrap">
            <table class="dashboard-table">
              <thead>
                <tr>
                  <th>Portal Username</th>
                  <th>Student No.</th>
                  <th>Portal Access</th>
                  <th>Full Name</th>
                  <th>Email</th>
                  <th>Program</th>
                  <th>Status</th>
                  <th>Active</th>
                  <th>Joined</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% for u in students %}
                  <tr>
                    <td>{{ u.application_record.reg_number|default:u.username }}</td>
                    <td>{{ u.application_record.student_number|default:"-" }}</td>
                    <td>
                      {% if u.is_active %}
                        <span class="status-badge status-approved">Active</span>
                      {% else %}
                        <span class="status-badge status-pending">Inactive</span>
                      {% endif %}
                    </td>
                    <td>{{ u.application_record.full_name|default:"-" }}</td>
                    <td>{{ u.email|default:"-" }}</td>
                    <td>{{ u.application_record.program|default:"-" }}</td>
                    <td>{{ u.userprofile.student_status|default:"-" }}</td>
                    <td>{{ u.is_active }}</td>
                    <td>{{ u.date_joined|date:"Y-m-d" }}</td>
                    <td>
                      <form class="delete-form" method="post" action="{% url 'user_delete' u.id %}">
                        {% csrf_token %}
                        <button class="icon-btn icon-danger" type="submit" title="Delete account" aria-label="Delete account">
                          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path d="M9 3h6l1 2h4v2H4V5h4l1-2Zm1 6h2v9h-2V9Zm4 0h2v9h-2V9ZM6 9h2v9H6V9Z"></path>
                          </svg>
                        </button>
                      </form>
                    </td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="10">No students found.</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </section>
{% endblock %}
