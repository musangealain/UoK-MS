{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="{% static 'dashboard/student.css' %}">
  </head>
  <body>
    <div class="student-shell">
      <header class="topbar">
        <div class="brand">
          <img class="brand-logo" src="{% static 'website/UoKlogo.png' %}" alt="University logo">
          <div>
            <p class="brand-title">University Management System</p>
            <p class="brand-sub">Student Portal</p>
          </div>
        </div>
        <div class="topbar-actions">
          <button class="icon-btn" type="button" title="Notifications" aria-label="Notifications">
            <span>ðŸ””</span>
          </button>
          <button class="icon-btn" type="button" title="Settings" aria-label="Settings">
            <span>âš™ï¸</span>
          </button>
          <div class="user-pill">
            <div class="user-avatar">{{ user.first_name|default:user.username|slice:":1" }}</div>
            <div>
              <p class="user-name">{{ user.first_name|default:user.username }}</p>
              <p class="user-role">Student</p>
            </div>
          </div>
          <form class="logout-form" method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <input type="hidden" name="next" value="/">
            <button class="logout-btn" type="submit">Logout</button>
          </form>
        </div>
      </header>

      <aside class="sidebar">
        <nav class="nav">
          <a class="nav-title-link" href="{% url 'student_dashboard' %}">Dashboard</a>
          <a class="nav-link {% if current_page == 'overview' or not current_page %}active{% endif %}" href="{% url 'student_dashboard' %}">Overview</a>
          <div class="nav-group">
            <p class="nav-label">Academics</p>
            <a class="nav-link" href="#">My Courses</a>
            <a class="nav-link" href="#">Course Registration</a>
            <a class="nav-link" href="#">Timetable</a>
            <a class="nav-link" href="#">Course Materials</a>
          </div>
          <div class="nav-group">
            <p class="nav-label">Exams & Grades</p>
            <a class="nav-link" href="#">Results</a>
            <a class="nav-link" href="#">Transcript</a>
            <a class="nav-link" href="#">GPA / CGPA</a>
            <a class="nav-link" href="#">Exam Schedule</a>
          </div>
          <div class="nav-group">
            <p class="nav-label">Finance</p>
            <a class="nav-link" href="#">Fees Statement</a>
            <a class="nav-link" href="#">Payment History</a>
            <a class="nav-link" href="#">Make Payment</a>
            <a class="nav-link" href="#">Scholarships</a>
          </div>
          <div class="nav-group">
            <p class="nav-label">Communication</p>
            <a class="nav-link" href="#">Announcements</a>
            <a class="nav-link" href="#">Messages</a>
          </div>
          <div class="nav-group">
            <p class="nav-label">Profile</p>
            <a class="nav-link" href="#">Personal Info</a>
            <a class="nav-link" href="#">Documents</a>
            <a class="nav-link" href="#">Change Password</a>
          </div>
        </nav>
      </aside>

      <main class="main">
        <section class="page-header">
          <div>
            <h1>Student Dashboard</h1>
            <p>Welcome back, {{ user.first_name|default:user.username }}. Here is your academic overview.</p>
          </div>
          <div class="quick-actions">
            <a class="primary-btn" href="#">Register Courses</a>
            <a class="ghost-btn" href="#">Download Transcript</a>
          </div>
        </section>

        <section class="summary-grid">
          <div class="summary-card">
            <p class="summary-label">Enrolled Program</p>
            <h3>{% if application %}{{ application.program }}{% else %}Program pending{% endif %}</h3>
            <p class="summary-meta">Status: {{ user.userprofile.student_status|default:"-"|title }}</p>
          </div>
          <div class="summary-card">
            <p class="summary-label">Student Number</p>
            <h3>{% if application and application.student_number %}{{ application.student_number }}{% else %}-{% endif %}</h3>
            <p class="summary-meta">Registration: {% if application and application.reg_number %}{{ application.reg_number }}{% else %}{{ user.username }}{% endif %}</p>
          </div>
          <div class="summary-card">
            <p class="summary-label">Application Status</p>
            <h3>{% if application %}{{ application.get_status_display }}{% else %}-{% endif %}</h3>
            <p class="summary-meta">Submitted: {% if application and application.submitted_at %}{{ application.submitted_at|date:"Y-m-d" }}{% else %}-{% endif %}</p>
          </div>
          <div class="summary-card">
            <p class="summary-label">Account Status</p>
            <h3>{% if user.is_active %}Active{% else %}Inactive{% endif %}</h3>
            <p class="summary-meta">Last login: {{ user.last_login|date:"Y-m-d"|default:"-" }}</p>
          </div>
        </section>

        <section class="content-grid">
          <div class="panel panel-wide">
            <div class="panel-header">
              <h2>Today&rsquo;s Classes</h2>
              <span class="panel-pill">Monday</span>
            </div>
            <div class="timetable">
              <div class="timetable-row timetable-header">
                <span>Time</span>
                <span>Course</span>
                <span>Room</span>
              </div>
              <div class="timetable-row">
                <span>08:00</span>
                <span>Data Structures</span>
                <span>B201</span>
              </div>
              <div class="timetable-row">
                <span>10:00</span>
                <span>Database Systems</span>
                <span>A105</span>
              </div>
            </div>
          </div>

          <div class="panel">
            <div class="panel-header">
              <h2>Announcements</h2>
              <span class="panel-pill panel-pill-alert">3 New</span>
            </div>
            <div class="announcement">
              <h4>Mid-semester exams timetable released</h4>
              <p>Check the exam schedule section for details.</p>
              <span>Updated 2 hours ago</span>
            </div>
            <div class="announcement">
              <h4>Library clearance required</h4>
              <p>Complete clearance before registration closes.</p>
              <span>Updated yesterday</span>
            </div>
          </div>

          <div class="panel">
            <div class="panel-header">
              <h2>Quick Actions</h2>
            </div>
            <div class="action-grid">
              <a href="#" class="action-card">Register Courses</a>
              <a href="#" class="action-card">View Results</a>
              <a href="#" class="action-card">Pay Fees</a>
              <a href="#" class="action-card">Download Transcript</a>
            </div>
          </div>
        </section>
      </main>
    </div>
  </body>
</html>
