{% extends "dashboard/student/base.html" %}
{% block title %}Student Dashboard{% endblock %}

{% block styles %}
  <style>
    .student-shell .main{
      padding:18px 22px 26px;
    }
    .overview-compact .page-header{
      margin-bottom:14px;
    }
    .overview-compact .stats-grid{
      margin-bottom:14px;
    }
    .overview-compact .stat-card{
      padding:14px;
    }
    .overview-compact .stat-card h3{
      font-size:16px;
    }
  </style>
{% endblock %}

{% block main %}
  <div class="overview-compact">
    <section class="page-header">
      <div>
        <h1>Student Dashboard</h1>
        <p>Welcome back, {{ application.full_name|default:user.first_name|default:user.username }}</p>
      </div>
      <div class="quick-actions">
        <a class="primary-btn" href="#module-registration">Module Registration</a>
        <a class="ghost-btn" href="#">Pay Fees</a>
      </div>
    </section>

    <section class="panel panel-tight">
      <div class="panel-header">
        <h2>Admission Identity</h2>
        <span class="panel-pill">Portal Access</span>
      </div>
      <ul class="activity-list">
        <li><strong>Portal Username:</strong> {{ application.reg_number|default:user.username }}</li>
        <li><strong>Student Number:</strong> {{ application.student_number|default:"Pending" }}</li>
        <li><strong>Program:</strong> {{ application.program|default:"-" }}</li>
      </ul>
    </section>

    <section class="overview-grid" aria-label="Student overview summary">
      <article class="overview-card overview-card-schedule">
        <p class="overview-label">Today Schedule</p>
        <h3 class="overview-value">Data Structures</h3>
        <div class="mini-schedule" role="list" aria-label="Today schedule">
          <div class="mini-row" role="listitem">
            <span class="mini-time">08:00</span>
            <span class="mini-main">Stacks &amp; Queues</span>
            <span class="mini-meta">B201</span>
          </div>
          <div class="mini-row" role="listitem">
            <span class="mini-time">10:00</span>
            <span class="mini-main">SQL Joins &amp; Indexes</span>
            <span class="mini-meta">A105</span>
          </div>
        </div>
      </article>

      <article class="overview-card overview-card-deadlines">
        <p class="overview-label">Upcoming Deadlines</p>
        <h3 class="overview-value">This Week</h3>
        <ul class="mini-list" aria-label="Upcoming deadlines">
          <li><span class="mini-dot" aria-hidden="true"></span>Assignment 2 submission — Thu</li>
          <li><span class="mini-dot" aria-hidden="true"></span>Fees payment deadline — Fri</li>
        </ul>
      </article>

      <article class="overview-card overview-card-wallet">
        <p class="overview-label">Wallet Snapshot</p>
        <h3 class="overview-value">245,000 RWF</h3>
        <p class="mini-note">Available: 120,000 RWF</p>
        <p class="mini-note">Spent (30 days): 45,000 RWF</p>
      </article>

      <article class="overview-card overview-card-announcements">
        <p class="overview-label">Announcements</p>
        <h3 class="overview-value">Latest Updates</h3>
        <ul class="mini-list" aria-label="Announcements">
          <li><span class="mini-dot" aria-hidden="true"></span>Mid-semester exams timetable released — Today</li>
          <li><span class="mini-dot" aria-hidden="true"></span>Library clearance required before registration closes — Yesterday</li>
        </ul>
      </article>
    </section>

    <section class="panel panel-tight" id="module-registration" aria-label="Module registration">
      <div class="panel-header">
        <div>
          <h2>Module Registration</h2>
          <p class="panel-sub">Book your modules based on registration type and complete payment to confirm.</p>
        </div>
        <span class="panel-pill">This Semester</span>
      </div>

      <div class="reg-layout">
        <section class="reg-box">
          <h3 class="reg-box-title">Register For</h3>
          <p class="reg-box-sub">Select registration type to get modules to book</p>

          <form class="reg-form" method="post" action="#">
            {% csrf_token %}
            <details class="reg-dropdown">
              <summary class="reg-summary">
                <span class="reg-summary-title">Registration type</span>
                <span class="reg-summary-value">Choose…</span>
              </summary>
              <div class="reg-options" role="group" aria-label="Registration type">
                <div class="reg-option">
                  <input class="reg-radio" type="radio" id="reg-first-attempt" name="registration_type" value="first_attempt" checked>
                  <label class="reg-option-label" for="reg-first-attempt">First attempt Registration</label>
                </div>
                <div class="reg-option">
                  <input class="reg-radio" type="radio" id="reg-retake" name="registration_type" value="retake">
                  <label class="reg-option-label" for="reg-retake">Retake Registration</label>
                </div>
              </div>
            </details>

            <div class="reg-actions">
              <button class="action-btn action-danger" type="submit">Book Module</button>
              <button class="action-btn action-success" type="button">Make Payment</button>
            </div>
          </form>
        </section>

        <section class="reg-box">
          <h3 class="reg-box-title">Module List</h3>
          <p class="reg-box-sub">Modules you have booked for this semester</p>
          <div class="table-wrap table-wrap-compact">
            <table class="dashboard-table">
              <thead>
                <tr>
                  <th>Module Code</th>
                  <th>Unit Name</th>
                  <th>Credit hours</th>
                  <th>Semester</th>
                  <th>Month</th>
                  <th>Session</th>
                  <th>Room</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>CSC201</td>
                  <td>Data Structures</td>
                  <td>3</td>
                  <td>1</td>
                  <td>Feb</td>
                  <td>Morning</td>
                  <td>B201</td>
                  <td>
                    <div class="table-actions">
                      <button class="action-btn action-approve" type="button">Register Module</button>
                      <button class="action-btn action-deny" type="button">Drop</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>CSC205</td>
                  <td>Database Systems</td>
                  <td>3</td>
                  <td>1</td>
                  <td>Feb</td>
                  <td>Afternoon</td>
                  <td>A105</td>
                  <td>
                    <div class="table-actions">
                      <button class="action-btn action-approve" type="button">Register Module</button>
                      <button class="action-btn action-deny" type="button">Drop</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="reg-box reg-box-wide">
          <h3 class="reg-box-title">Registration List</h3>
          <p class="reg-box-sub">Your past registered modules and history</p>
          <div class="table-wrap table-wrap-compact">
            <table class="dashboard-table">
              <thead>
                <tr>
                  <th>Academic Year</th>
                  <th>Semester</th>
                  <th>Module Code</th>
                  <th>Unit Name</th>
                  <th>Credits</th>
                  <th>Status</th>
                  <th>Grade</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>2024/2025</td>
                  <td>2</td>
                  <td>CSC102</td>
                  <td>Introduction to Programming</td>
                  <td>3</td>
                  <td><span class="status-badge status-approved">Completed</span></td>
                  <td>A</td>
                </tr>
                <tr>
                  <td>2024/2025</td>
                  <td>2</td>
                  <td>MTH110</td>
                  <td>Discrete Mathematics</td>
                  <td>3</td>
                  <td><span class="status-badge status-approved">Completed</span></td>
                  <td>B+</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </section>
  </div>
{% endblock %}
